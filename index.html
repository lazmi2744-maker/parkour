<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Hardcore Parkour üíó</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
  margin: 0;
  background: #e9d5ff;
  overflow: hidden;
  font-family: Arial, sans-serif;
}
canvas {
  display: block;
}
#ui {
  position: fixed;
  top: 10px;
  left: 10px;
  color: #9333ea;
  font-size: 18px;
}
#heart {
  font-size: 26px;
  animation: grow 1s infinite alternate;
}
@keyframes grow {
  from { transform: scale(1); }
  to { transform: scale(1.3); }
}
#mobile {
  position: fixed;
  bottom: 15px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 20px;
}
.btn {
  width: 60px;
  height: 60px;
  background: #c084fc;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 30px;
  color: white;
  user-select: none;
}
</style>
</head>
<body>

<canvas id="game"></canvas>

<div id="ui">
  üí∞ Coins: <span id="coins">0</span><br>
  <span id="heart">üíó</span>
</div>

<div id="mobile">
  <div class="btn" id="left">‚¨ÖÔ∏è</div>
  <div class="btn" id="jump">‚¨ÜÔ∏è</div>
  <div class="btn" id="right">‚û°Ô∏è</div>
</div>

<audio id="music" loop autoplay>
  <source src="https://cdn.pixabay.com/audio/2022/08/01/audio_9c1d3a9c5e.mp3">
</audio>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
canvas.width = innerWidth;
canvas.height = innerHeight;

let gravity = 1.2;
let coins = 0;
let level = 0;

const player = {
  x: 50, y: 300, w: 20, h: 60,
  vx: 0, vy: 0,
  color: "#9333ea",
  onGround: false
};

const levels = [
  [{x:0,y:400,w:400},{x:500,y:350,w:200}],
  [{x:0,y:420,w:300},{x:400,y:320,w:120},{x:600,y:260,w:80}],
  [{x:0,y:450,w:200},{x:300,y:300,w:100},{x:500,y:200,w:80}],
  [{x:0,y:480,w:180},{x:250,y:330,w:90},{x:430,y:240,w:60}],
  [{x:0,y:500,w:140},{x:220,y:340,w:60},{x:380,y:200,w:40}]
];

let keys = {};

addEventListener("keydown",e=>keys[e.key]=true);
addEventListener("keyup",e=>keys[e.key]=false);

["left","right","jump"].forEach(id=>{
  const el=document.getElementById(id);
  el.ontouchstart=()=>keys[id]=true;
  el.ontouchend=()=>keys[id]=false;
});

function reset() {
  player.x=50; player.y=300;
  player.vx=0; player.vy=0;
}

function update() {
  player.vx=0;
  if(keys["ArrowLeft"]||keys["a"]||keys.left) player.vx=-6;
  if(keys["ArrowRight"]||keys["d"]||keys.right) player.vx=6;
  if((keys[" "]||keys.jump) && player.onGround){
    player.vy=-18;
    player.onGround=false;
  }

  player.vy+=gravity;
  player.x+=player.vx;
  player.y+=player.vy;

  player.onGround=false;
  for(let p of levels[level]){
    if(player.x<p.x+p.w && player.x+player.w>p.x &&
       player.y+player.h>p.y && player.y+player.h<p.y+20){
      player.y=p.y-player.h;
      player.vy=0;
      player.onGround=true;
    }
  }

  if(player.y>canvas.height){
    reset();
  }

  if(player.x>canvas.width-40){
    level++;
    coins+=50;
    document.getElementById("coins").innerText=coins;
    if(level>=levels.length){
      document.body.innerHTML="<h1 style='text-align:center;margin-top:40vh;color:#9333ea'>üíã SMOOCH üíó</h1>";
    } else reset();
  }
}

function draw() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle=player.color;
  ctx.fillRect(player.x,player.y,player.w,player.h);

  ctx.fillStyle="#c084fc";
  for(let p of levels[level]){
    ctx.fillRect(p.x,p.y,p.w,20);
  }
}

function loop(){
  update(); draw();
  requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>
